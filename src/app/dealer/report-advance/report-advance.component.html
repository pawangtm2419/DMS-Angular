<section>
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12">
        <!-- searchbar-row -->
        <div class="sidebarMain">
          <div class="row">
              <div class="col-md-12">
                  <ul class="model-menu">
                      <li><a routerLink="/home">Depot</a></li>/
                      <li><a routerLink="/r-advance">Advance Report</a></li>
                  </ul>
              </div>
              <div class="col-md-6">
                  <div class="searchBar d-flex justify-content-center align-items-center">
                      <i class="fas fa-search"></i><input class="form-control" type="search" [(ngModel)]="searchData"  placeholder="Search" aria-label="Search">
                  </div>
              </div>
              <div class="col-md-6 align-self-end text-end filterMain">
                  <button class="btn btn-primary me-2" type="button" data-bs-toggle="collapse" data-bs-target="#filter" aria-expanded="false" aria-controls="collapseExample"> <i class="fas fa-filter"></i> </button>
                  <button type="button" class="btn btn-primary me-2" *ngIf="isExcelDownload" (click)="download()" title="Download selected records"><i class="fa fa-download"></i></button>
                  <label for="limit">
                      <select id="limit" name="limit" class="form-select" (click)="dataLimit()">
                        <option *ngFor="let limit of limits" value="{{limit.value}}">{{limit.key}}</option>
                      </select>
                  </label>
              </div>
          </div>
      </div>
        <div class="collapse mb-1" id="filter">
          <div class="card card-body">
            <div class="container">
              <div class="row">
                <div class="d-downMain">
                  <div class="row" style="--bs-gutter-x: 1.5rem;">
                      <div class="col-md-2 mbSm">
                        <div class="row align-items-center">
                          <div class="col-md-3 col-sm-3 col-3">
                            <label for="fromDate" class="col-form-label" style="padding-right: 20px;">Variant: </label>
                          </div>
                          <div class="col-md-9 col-sm-9 col-9">
                            <input list="zone" [(ngModel)] ="selectedZone" class="form-control">
                            <datalist id="zone">
                              <option *ngFor="let obj of zoleList" value="{{obj.zoneCode}}">
                            </datalist>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-2 mbSm">
                        <div class="row align-items-center">
                          <div class="col-md-3 col-sm-3 col-3">
                            <label for="fromDate" class="col-form-label" style="padding-right: 20px;">Model: </label>
                          </div>
                          <div class="col-md-9 col-sm-9 col-9">
                            <input list="cityName" [(ngModel)] ="selectedCityName" class="form-control">
                            <datalist id="cityName">
                              <option *ngFor="let obj of cityList" value="{{obj}}">
                            </datalist>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-2 mbSm">
                        <div class="row align-items-center" style="--bs-gutter-x: 1rem;">
                          <select name="valueCheck" class="form-select">
                            <option value="">To depot</option>
                            <option> depot Name</option>
                          </select>
                        </div>
                      </div>
                      <div class="col-md-2 mbSm">
                        <div class="row align-items-center" style="--bs-gutter-x: 1rem;">
                          <select name="valueCheck" class="form-select">
                            <option value="">Transport Mode</option>
                            <option>Transport Name</option>
                          </select>
                        </div>
                      </div>
                      <div class="col-md-2 mbSm">
                        <div class="row align-items-center" style="--bs-gutter-x: 1rem;">
                          <div>
                            <select name="valueCheck" class="form-select">
                              <option value="">Transport Name</option>
                              <option> Transport Name</option>
                            </select>
                          </div>
                          <!-- <div>
                            <select name="valueCheck" class="form-select">
                              <option value="">Driver Name</option>
                              <option> driver Name </option>
                            </select>
                          </div> -->
                        </div>
                      </div>
                      <div class="col-md-2 align-self-end text-end">
                          <div class="BtnMainGrp">
                              <button type="button" (click)="getadvReportList()" class="btn btn-primary me-2">Show Data</button>
                              <button type="button" class="btn btn-primary">Clear</button>
                          </div>
                      </div>
                  </div>
              </div>
            </div>
          </div>
        </div>
        </div>
        <div class="table-responsive">
          <table class="table table-striped table-hover align-middle" id="export">
            <thead class="text-white sticky-top theadbg">
              <tr>
                <th></th>
                <th colspan="4" class="text-center">Dealer</th>
                <th colspan="5" class="text-center">Customer</th>
                <th colspan="5" class="text-center">Vehicle</th>
                <th colspan="12" class="text-center">Price</th>
                <th colspan="7" class="text-center">Dates</th>
                <th></th>
                <th></th>
                <th></th>
              </tr>
              <tr>
                <th>Sr.No.</th>
                <th>Code</th>
                <th>Name</th>
                <th>Location</th>
                <th>State</th>
                <th>Name</th>
                <th>Contact</th>
                <th>Village</th>
                <th>Tehsil</th>
                <th>State</th>
                <th>Model</th>
                <th>ProductCode</th>
                <th>Variant</th>
                <th>ChassisNo</th>
                <th>Engine No</th>
                <th>Financer Type</th>
                <th>Financer Name</th>
                <th>DealPrice</th>
                <th>Invoice Amount</th>
                <th>Margin</th>
                <th>Cash</th>
                <th>Old Tractor Price</th>
                <th>cash/Finance Amount Received On</th>
                <th>Finance Amount Received</th>
                <th>ReceivedAmt</th>
                <th>BalanceAmt</th>
                <th>Quantity</th>
                <th>Invoice&nbsp;No</th>
                <th>Production&nbsp;Date</th>
                <th>Invoice&nbsp;Date</th>
                <th>DeliveryDate</th>
                <th>Exp Disbursement Date</th>
                <th>Tractor Ageing</th>
                <th>Advance ageing</th>
                <th>Remarks1 (Delivery)</th>
                <th>Remarks2</th>
                <th>Add Remarks</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let adv of advanceData | filter: searchData | paginate: { itemsPerPage: limit, currentPage: pageData }; let i = index">
                <td data-title="Sr. No.">{{limit*(pageData-1)+i+1}}</td>
                <td data-title="Dealer Code">{{adv?.dealer?.code}}</td>
                <td data-title="Dealer Name">{{adv?.dealer?.name}}</td>
                <td data-title="Location">{{adv?.dealer?.city}}</td>
                <td data-title="State">{{adv?.dealer?.state}}</td>
                <td data-title="Customer Name">{{adv?.customer?.name}}</td>
                <td data-title="Contact">{{adv?.customer?.phone}}</td>
                <td data-title="Village">{{adv?.customer?.city}}</td>
                <td data-title="Tehsil">{{adv?.customer?.tehsil}}</td>
                <td data-title="State">{{adv?.customer?.state}}</td>
                <td data-title="Model">{{adv?.model}}</td>
                <td data-title="ProductCode">{{adv?.productCode}}</td>
                <td data-title="Variant">{{adv?.variantCode}}</td>
                <td data-title="ChassisNo">{{adv?.chassisNo}}</td>
                <td data-title="Engine No">{{adv?.engineNo}}</td>
                <td data-title="Financer Type">{{adv?.finType}}</td>
                <td data-title="Financer Name">{{adv?.financeDetails.bankName}}</td>
                <td data-title="DealPrice">{{adv?.customer?.dealPrice | currency : 'INR'}}</td>
                <td data-title="Invoice Amount">{{adv?.invoiceAmt | currency : 'INR'}}</td>
                <td data-title="Margin">{{adv?.marginCollected}}</td>
                <td data-title="Cash">{{adv?.cashAmount}}</td>
                <td data-title="Old Tractor Price">{{adv?.customer?.oldTractor.price}}</td>
                <td data-title="Cash/Finance Amount Received On">{{adv?.lastReceived | date:'dd-MM-yyyy'}}</td>
                <td data-title="Finance Amount Received">{{adv?.financeAmount}}</td>
                <td data-title="ReceivedAmt">{{adv?.customer?.dealPrice - adv?.customer?.balanceAmount | currency : 'INR'}}</td>
                <td data-title="BalanceAmt">{{adv?.customer?.balanceAmount}}</td>
                <td data-title="Quantity">{{adv?.isReturned ? -1 : 1}}</td>
                <td data-title="Invoice No">{{adv?.customer?.invoiceNumber}}</td>
                <td data-title="Production Date">{{adv?.prodDate | date:'dd-MM-yyyy'}}</td>
                <td data-title="Invoice Date">{{adv?.customer?.invoiceDate | date:'dd-MM-yyyy'}}</td>
                <td data-title="Delivery Date">{{adv?.customer?.deliveryDate | date:'dd-MM-yyyy'}}</td>
                <td data-title="Exp Disbursement Date">{{adv?.expDisbDate | date:'dd-MM-yyyy'}}</td>
                <td data-title="Tractor Ageing">{{adv}}</td>
                <td data-title="Advance ageing">{{adv}}</td>
                <td data-title="Remarks1 (Delivery)">{{adv?.customer?.deliveryDate}}</td>
                <td data-title="Remarks2">{{adv?.customer?.receivedRemarks}}</td>
                <td data-title="Add Remarks"><i class="fas fa-plus"></i></td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="input-group-icon input-group-icon-right mt-2">
          <pagination-controls (pageChange)="pageData = $event"></pagination-controls>
        </div>
      </div>
    </div>
  </div>
</section>
