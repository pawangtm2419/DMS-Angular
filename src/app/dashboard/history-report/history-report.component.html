<section>
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-12">
          <!-- searchbar-row -->
          <div class="row mb-2">
            <div class="col-md-12">
              <ul class="model-menu">
                <li onclick="goBack()"><button class="btn badge bg-dark"><i class="fas fa-arrow-left"></i> Back</button></li>
                <li (click)="refresh()"><button class="btn badge bg-primary" title="Refresh"><i class="fas fa-sync-alt"></i></button></li> |
                <li><a routerLink="/">Dashboard</a></li>/
                <li><a routerLink="/history-report">History Report</a></li>
              </ul>
            </div>
            <div class="col-md-6 col-12">
              <div class="searchBar mt-2 d-flex justify-content-center align-items-center">
                <i class="fas fa-search"></i><input class="form-control" type="search" [(ngModel)]="chassisNo" (input)="search()" placeholder="Chassis No." aria-label="Search">
              </div>
            </div>
            <div class="col-md-6 col-12 align-self-end text-end filterMain">
              <button class="btn btn-primary me-2" type="button" data-bs-toggle="collapse" title="Filter" data-bs-target="#filter" aria-expanded="false" aria-controls="collapseExample"> <i class="fas fa-filter"></i> </button>
              <button type="button" class="btn btn-primary me-2" *ngIf="isExcelDownload" (click)="download()" title="Download selected records"><i class="fa fa-download"></i></button>
              <label for="limit">
                <select id="limit" name="limit" class="form-select" (click)="dataLimit()">
                  <option *ngFor="let limit of limits" value="{{limit.value}}">{{limit.key}}</option>
                </select>
              </label>
            </div>
          </div>
          <div class="collapse mb-2" id="filter">
            <div class="card card-body">
              <div class="container">
                <div class="row">
                  <div class="col-md-8 mx-auto">
                    <div class="row" style="--bs-gutter-x: 1.5rem;">
                      <div class="col-md-5 col-sm-6 col-12 mbSm">
                        <div class="row align-items-center">
                          <div class="col-md-2 col-2">
                            <label for="fromDate" class="col-form-label">From: </label>
                          </div>
                          <div class="col-md-10 col-10">
                            <input type="date" id="fromDate" [ngModel]="fromDate | date:'yyyy-MM-dd'" max="{{currentDate}}" class="form-control">
                          </div>
                        </div>
                      </div>
                      <div class="col-md-5 col-sm-6 col-12 mbSm">
                        <div class="row align-items-center">
                          <div class="col-md-2 col-2">
                            <label for="toDate" class="col-form-label">To: </label>
                          </div>
                          <div class="col-md-10 col-10">
                            <input type="date" id="toDate" [ngModel]="toDate | date:'yyyy-MM-dd'" max="{{currentDate}}" class="form-control">
                          </div>
                        </div>
                      </div>
                      <div class="col-md-2 col-sm-12 col-12 searDateBtn">
                        <button class="btn btn-primary" (click)="getHistoryData()">Search</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- searchbar-row -->
          <div class="table-responsive">
            <table class="table table-striped table-hover align-middle" id="export">
              <thead class="text-white sticky-top theadbg">
                <tr>
                  <th>#</th>
                  <th>Product Code</th>
                  <th>Model</th>
                  <th>Variant</th>
                  <th>Chassis No</th>
                  <th>Engine No</th>
                  <th>Manufacture Date</th>
                  <th>Ageing</th>
                  <th>Location</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let hist of histReportData | filter: chassisNo | paginate: { itemsPerPage: limit, currentPage: pageData }; let i=index">
                  <td data-title="Sr. No."><a class="srNoStyle" (click)="rowData()" data-bs-toggle="modal" data-bs-target="#chassisModal">{{limit*(pageData-1)+i+1}}</a></td>
                  <td data-title="Product Code">{{hist.productCode }}</td>
                  <td data-title="Model">{{hist.model}}</td>
                  <td data-title="Variant">{{hist.variantCode}}</td>
                  <td data-title="Chassis No">{{hist.chassisNo}} </td>
                  <td data-title="Engine No">{{hist.engineNo}}</td>
                  <td data-title="Manufacture Date">{{hist.createDate | date:"dd-MM-yyyy"}}</td>
                  <td data-title="Ageing">{{hist.prodDate | date: "dd-MM-yyyy"}}</td>
                  <td data-title="Location">{{hist.locationType}}</td>
                  <td data-title="Action"><a class="formBtn" href="#">Form</a></td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="input-group-icon input-group-icon-right mt-2">
            <pagination-controls (pageChange)="pageData = $event"></pagination-controls>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Chassis Modal -->
  <div class="modal fade" id="chassisModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header modalHeaderCenter">
          <h5 class="modal-title text-center" id="exampleModalLabel">Transaction info of - {{chassisNo}}</h5>
          <!-- <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> -->
          <a class="btn-close2" data-bs-dismiss="modal" aria-label="Close"><i class="fa fa-times"></i></a>
        </div>
        <div class="modal-body">
            <div class="table-responsive">
                <table class="table table-striped table-hover align-middle" id="export">
                  <thead class="text-white theadbg">
                    <tr>
                      <th>#</th>
                      <th>Type</th>
                      <th>From Code</th>
                      <th>From Name</th>
                      <th>To Code</th>
                      <th>To Name</th>
                      <th>Date</th>
                      <th>Invoice Number</th>
                      <th>Created On</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let vehicle of vehicleData; let i=index">
                      <td data-title="Sr. No.">{{i+1}}</td>
                      <td data-title="Type">{{vehicle.type}}</td>
                      <td data-title="From Code">{{vehicle.previousState.code}}</td>
                      <td data-title="From Name">{{vehicle.previousState.name}}</td>
                      <td data-title="To Code">{{vehicle.code}} </td>
                      <td data-title="To Name">{{vehicle.name}}</td>
                      <td data-title="Date">{{vehicle.invoiceDate | date:"dd-MM-yyyy"}}</td>
                      <td data-title="Invoice Number">{{vehicle.invoiceNumber}}</td>
                      <td data-title="Created On">{{vehicle.createDate | date:"dd-MM-yyyy"}}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
        </div>
        <!-- <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save changes</button>
        </div> -->
      </div>
    </div>
  </div>
  <!-- Chassis Modal End -->
