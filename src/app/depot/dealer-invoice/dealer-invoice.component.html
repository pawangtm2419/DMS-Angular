<section>
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12">
        <!-- searchbar-row -->
        <div class="sidebarMain">
          <div class="row">
              <div class="col-md-12">
                  <ul class="model-menu">
                      <li><a routerLink="/home">Depot</a></li>/
                      <li><a routerLink="/depot-dealer-invoice">Invoices List</a></li>
                  </ul>
              </div>
              <div class="col-md-6 col-12">
                  <div class="searchBar d-flex justify-content-center align-items-center">
                      <i class="fas fa-search"></i><input class="form-control" type="search" [(ngModel)]="searchData" placeholder="Search" aria-label="Search">
                  </div>
              </div>
              <div class="col-md-6 col-12 align-self-end text-end">
                  <div class="modelBtnMain">
                    <button class="btn btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#filter" aria-expanded="false" aria-controls="collapseExample"> <i class="fas fa-filter"></i> </button>
                    <button type="button" class="btn btn-primary ms-2" *ngIf="isExcelDownload" (click)="download()" title="Download selected records"><i class="fa fa-download"></i></button>
                  </div>
                  <label for="limit">
                      <select id="limit" name="limit" class="form-select" (click)="dataLimit()">
                          <option *ngFor="let limit of limits" value="{{limit.value}}">{{limit.key}}</option>
                      </select>
                  </label>
              </div>
          </div>
      </div>
      <!-- searchbar-row -->
        <div class="collapse mb-1" id="filter">
          <div class="card card-body">
            <div class="container">
              <div class="row">
                <div class="col-md-8 mx-auto">
                  <div class="row" style="--bs-gutter-x: 1rem;">
                    <div class="col-md-5 col-12 mbSm">
                      <div class="row align-items-center">
                        <div class="col-2">
                          <label for="fromDate" class="col-form-label" style="padding-right: 20px;">From: </label>
                        </div>
                        <div class="col-10">
                          <input type="date" id="fromDate" [ngModel]="fromDate | date:'yyyy-MM-dd'" max="{{currentDate}}" class="form-control">
                        </div>
                      </div>
                    </div>
                    <div class="col-md-5 col-12 mbSm">
                      <div class="row align-items-center">
                        <div class="col-2">
                          <label for="toDate" class="col-form-label" style="padding-right: 20px;">To: </label>
                        </div>
                        <div class="col-10">
                          <input type="date" id="toDate" [ngModel]="toDate | date:'yyyy-MM-dd'" max="{{currentDate}}" class="form-control">
                        </div>
                      </div>
                    </div>
                    <div class="col-md-2 col-12">
                      <div class="searchBtnMain">
                        <button class="btn btn-primary" (click)="getdealerInvoiceList()">Search</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="table-responsive">
          <table class="table table-striped table-hover align-middle" id="export">
            <thead class="text-white sticky-top theadbg">
              <tr>
                <th></th>
                <th>From Depot</th>
                <th>To Dealer</th>
                <th>Dealer Code</th>
                <th>City</th>
                <th>State</th>
                <th>Invoice No.</th>
                <th>Invoice Date</th>
                <th>Created On</th>
                <th>Model</th>
                <th>Model Price</th>
                <th>Discount Amount</th>
                <th>Variant</th>
                <th>Chasis No/Product Code</th>
                <th>Engine No</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let invoice of invoiceData | paginate: { itemsPerPage: limit, currentPage: pageData } | filter: searchData; let i = index">
                <td data-title="Sr. No.">{{limit*(pageData-1)+i+1}}</td>
                <td data-title="From Depot">{{invoice?.data[0]?.previousState.name}}</td>
                <td data-title="To Dealer">{{invoice?.data[0]?.name}}</td>
                <td data-title="Dealer Code">{{invoice?.data[0]?.code}}</td>
                <td data-title="City">{{invoice?.data[0]?.city}}</td>
                <td data-title="State">{{invoice?.data[0]?.state}}</td>
                <td data-title="Invoice No.">{{invoice?._id}}</td>
                <td data-title="Invoice Date">{{invoice?.data[0]?.invoiceDate | date:"dd-MM-yyyy"}}</td>
                <td data-title="Created On">{{invoice?.data[0]?.createDate | date:"dd-MM-yyyy"}}</td>
                <td data-title="Model">{{invoice?.data[0]?.model}}</td>
                <td data-title="Model Price">{{invoice?.data[0]?.NDP}}</td>
                <td data-title="Discount Amount">{{invoice?.data[0]?.dealer?.discountAmount}}</td>
                <td data-title="Variant">{{invoice?.data[0]?.variantCode}}</td>
                <td data-title="Chassis No/Product Code">{{invoice?.data[0]?.chassisNo}}</td>
                <td data-title="Engine No">{{invoice?.data[0]?.engineNo}}</td>
                <td data-title="Action">
                  <button class="btn-view" type="button">View</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="input-group-icon input-group-icon-right mt-2">
          <pagination-controls (pageChange)="pageData = $event"></pagination-controls>
        </div>
      </div>
    </div>
  </div>
</section>
